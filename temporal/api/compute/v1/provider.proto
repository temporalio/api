syntax = "proto3";

package temporal.api.compute.v1;

option go_package = "go.temporal.io/api/compute/v1;compute";
option java_package = "io.temporal.api.compute.v1";
option java_multiple_files = true;
option java_outer_classname = "ProviderProto";
option ruby_package = "Temporalio::Api::Compute::V1";
option csharp_namespace = "Temporalio.Api.Compute.V1";

import "temporal/api/common/v1/message.proto";

// Provider stores information used by a worker control plane controller to
// respond to worker lifecycle events. For example, when a Task is received on
// a TaskQueue that has no active pollers, a serverless worker lifecycle
// controller might need to invoke an AWS Lambda Function that itself ends up
// calling the SDK's worker.New() function.
message Provider {
    // Type of the compute provider. This string is implementation-specific and
    // can be used by implementations to understand how to interpret the
    // contents of the provider_details field.
    string type = 1;
    // Contains provider-specific instructions and configuration.
    oneof detail {
        // will be an unencrypted, JSON-encoded object of provider-specific
        // information
        // (-- api-linter: core::0146::any=disabled
        //     aip.dev/not-precedent: This needs to be extensible to
        //     externally-written compute providers --)
        string detail_json = 2;
        // will be an encrypted, encoded bytestring containing
        // provider-specific information. The implementation must understand
        // how to decrypt the payload.
        temporal.api.common.v1.Payload detail_payload = 3;
    }
    // Optional. If the compute provider is a Nexus service, this should point
    // there.
    string nexus_endpoint = 10;
}
