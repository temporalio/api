syntax = "proto3";

package temporal.api.worker.v1;

option go_package = "go.temporal.io/api/worker/v1;worker";
option java_package = "io.temporal.api.worker.v1";
option java_multiple_files = true;
option java_outer_classname = "MessageProto";
option ruby_package = "Temporalio::Api::Worker::V1";
option csharp_namespace = "Temporalio.Api.Worker.V1";


import "google/protobuf/duration.proto";
import "google/protobuf/timestamp.proto";


message WorkerTaskStatus {
  google.protobuf.Timestamp last_successful_task_poll_time = 1;

  int32 task_pollers = 2;

  int32 slots_available = 3;
  int32 slots_used = 4;

  int32 processed_tasks = 5;
  int32 failed_tasks = 6;

  float process_rate_min = 7;
  float failure_rate_min = 8;
}

message WorkerStatus {
  string namespace_id = 1;
  // Unique identifier for the namespace.
  string worker_id = 2;

  string host_id = 3;
  string task_queue = 4;
  string deployment_name = 5;
  string build_id = 6;
  string sdk_name = 7;
  string sdk_version = 8;

  string worker_identity = 9;

  int32 worker_status = 10;
  google.protobuf.Duration uptime = 11;

  google.protobuf.Timestamp last_heartbeat_time = 12;

  WorkerTaskStatus workflow_task_status = 13;
  WorkerTaskStatus activity_task_status = 14;
  WorkerTaskStatus nexus_task_status = 15;

  float cpu_usage_percent = 16;
  int64 memory_usage_bytes = 17;
  float cache_hit_ratio = 18;
  float cache_size = 19;
}
